[
  {
    "rule_id": "D4_R01",
    "name": "The Stripe Wars Resolution",
    "category": "contradiction_resolution",
    "description": "H vs V: research is clear, H wins. H vs solid: small benefit (+0.03), not the dramatic 10% from H-vs-V comparisons. Cultural belief may modulate real-world social perception. Score H stripes as mildly positive for standard bodies, nullified for plus-size (Ashida), zone-split for pear/INVT.",
    "competing_evidence": {
      "academic": "H stripes thin 5-11% vs V stripes (Thompson 2011, Koutsoumpis 2021)",
      "popular_wisdom": "77% of people believe H stripes widen (multiple surveys)",
      "practitioner": "Split — some say avoid H, others say research proves they're fine"
    },
    "source_domain": 4,
    "source_file": "kridha_master_reference.docx",
    "section": "3.1"
  },
  {
    "rule_id": "D4_R02",
    "name": "Black Near the Face Resolution",
    "category": "contradiction_resolution",
    "description": "Both optical slimming and sallow complexion are true simultaneously. Dark color slims the body, but black near warm-toned skin creates unflattering complexion effect. Gradual sallow function: pure black (L=0.08) on warm skin near face = skin_mult 0.36, dark chocolate brown (L=0.18) = skin_mult 0.82. Recommend dark brown or burgundy instead of pure black for warm-toned users.",
    "competing_evidence": {
      "optical_science": "Dark colors contract perceived width (irradiation illusion, well-replicated)",
      "color_analysis": "Black near the face creates sallow appearance for warm undertones"
    },
    "source_domain": 4,
    "source_file": "kridha_master_reference.docx",
    "section": "3.2"
  },
  {
    "rule_id": "D4_R03",
    "name": "The Concealment Paradox Resolution",
    "category": "contradiction_resolution",
    "description": "Dual-goal scoring. Tent silhouettes score positively for concealment (+0.35) and negatively for slimming (-0.40). Composite weights 70% toward slimming by default (conservative: protect from common misconception), but shifts to 100% concealment if user explicitly selects concealment as goal.",
    "competing_evidence": {
      "user_belief": "Loose clothing hides my body and makes me look thinner",
      "perception_research": "Viewers estimate body size from garment boundaries, not body contours (Cornelissen 2009)"
    },
    "source_domain": 4,
    "source_file": "kridha_master_reference.docx",
    "section": "3.3"
  },
  {
    "rule_id": "D4_R04",
    "name": "V-Neck + High Rise Conflict Resolution",
    "category": "contradiction_resolution",
    "description": "Cross-garment interaction detection. When torso_score <= -1.0 AND rise > 26cm AND neckline = V: override V-neck score to -0.05. V pulls DOWN into torso, high waist pulls UP to waist — framing the shortest body segment. Requires seeing both garments simultaneously.",
    "competing_evidence": {
      "standard_advice": "V-necks elongate. High rise elongates legs. Both are good for petite.",
      "the_problem": "On short-torso petite body, they create opposing attention vectors"
    },
    "source_domain": 4,
    "source_file": "kridha_master_reference.docx",
    "section": "3.4"
  },
  {
    "rule_id": "D4_R05",
    "name": "Structured vs. Unstructured for Plus-Size Resolution",
    "category": "contradiction_resolution",
    "description": "Fabric construction gate: GSM, is_structured flag. Same ER < 0.03 triggers bodycon scoring, but path branches on fabric. Structured bodycon (scuba, shapewear panels) sculpts and smooths (-0.05). Thin jersey bodycon maps every contour (-0.40). The silhouette label is identical; only fabric construction distinguishes them.",
    "competing_evidence": {
      "generic_advice": "Avoid bodycon / Choose flowing fabrics for plus-size bodies",
      "reality": "Structured bodycon sculpts (-0.05). Thin jersey bodycon maps contours (-0.40). Same label, opposite outcomes."
    },
    "source_domain": 4,
    "source_file": "kridha_master_reference.docx",
    "section": "3.5"
  },
  {
    "rule_id": "D4_R06",
    "name": "Emphasis vs. Balance Philosophy Resolution",
    "category": "contradiction_resolution",
    "description": "Style philosophy axis. Engine supports both: emphasis philosophy increases weight on bodycon, color break, V-neck. Balance philosophy increases weight on dark slimming, matte zone, monochrome column. Scoring magnitudes don't change — only weights in composite. Users choose their philosophy; engine optimizes within it.",
    "competing_evidence": {
      "traditional_styling": "Balance proportions — minimize wide areas, maximize narrow ones",
      "body_positive": "Emphasize what you have — celebrate curves, showcase shoulders"
    },
    "source_domain": 4,
    "source_file": "kridha_master_reference.docx",
    "section": "3.6"
  },
  {
    "rule_id": "D4_R07",
    "name": "Source Quality Hierarchy Resolution",
    "category": "contradiction_resolution",
    "description": "Tiered confidence. Academic measurements set base effect direction and approximate magnitude. Practitioner consensus validates or adjusts for real-world factors academics miss (fabric behavior, cultural context). Popular wisdom acknowledged only where it modulates social perception (belief-perception loop on H stripes). When sources conflict, engine documents which source it follows and why.",
    "competing_evidence": {
      "problem": "Academic papers test on 2D shapes/mannequins, not real bodies in social contexts. Practitioner advice is experience-based but uncontrolled. Popular wisdom is often wrong but influences real-world perception."
    },
    "source_domain": 4,
    "source_file": "kridha_master_reference.docx",
    "section": "3.7"
  },
  {
    "rule_id": "D4_R08",
    "name": "Composite Scoring Architecture",
    "category": "scoring_rule",
    "description": "5-step composite scoring pipeline",
    "steps": {
      "step_1": "Call all 10 principle scorers independently. Each returns (score, reasoning_chain).",
      "step_2": "Assign weights. Non-applicable principles -> weight 0. User's primary goal -> matching principles get x1.5. Strong negatives (< -0.15) -> x1.2 (conservative protection).",
      "step_3": "Compute weighted average of applicable principles.",
      "step_4": "Apply SILHOUETTE DOMINANCE RULE: if tent or bodycon scores < -0.20 AND user's goal is slimming, the composite CANNOT go positive. No amount of good color or pattern compensates for fundamentally wrong fit.",
      "step_5": "Clamp to [-1.0, +1.0]."
    },
    "key_insight": "Composite is CONSERVATIVE. Bad silhouettes cannot be fixed by good colors. But good silhouettes CAN be enhanced by good colors.",
    "source_domain": 4,
    "source_file": "kridha_master_reference.docx",
    "section": "6.2"
  },
  {
    "rule_id": "D4_R09",
    "name": "Silhouette Dominance Rule",
    "category": "scoring_rule",
    "description": "If tent or bodycon scores < -0.20 AND user's goal is slimming, the composite CANNOT go positive. This prevents color/pattern from masking fundamentally wrong fit. Composite is forced to worst_silhouette_score * 0.3.",
    "trigger": "tent_or_bodycon_score < -0.20 AND styling_goal == SLIMMING AND composite > 0",
    "action": "composite = worst_silhouette_score * 0.3",
    "source_domain": 4,
    "source_file": "kridha_scoring_engine_v4.py",
    "source_lines": "1148-1154"
  },
  {
    "rule_id": "D4_R10",
    "name": "Goal-Based Weighting",
    "category": "scoring_rule",
    "description": "Principle weights adjusted based on user's styling goal",
    "weight_modifiers": {
      "SLIMMING": {"amplified": ["Dark/Black Slimming", "Matte Zone", "H-Stripe Thinning", "Tent Concealment"], "multiplier": 1.5},
      "EMPHASIS": {"amplified": ["Bodycon Mapping", "Color Break", "V-Neck Elongation"], "multiplier": 1.5},
      "CONCEALMENT": {"amplified": ["Tent Concealment"], "multiplier": 1.5, "secondary": {"Matte Zone": 1.3}}
    },
    "source_domain": 4,
    "source_file": "kridha_scoring_engine_v4.py",
    "source_lines": "1117-1130"
  },
  {
    "rule_id": "D4_R11",
    "name": "Conservative Negative Amplification",
    "category": "scoring_rule",
    "description": "Any principle scoring below -0.15 gets its weight multiplied by 1.2. This creates asymmetric protection: the engine is more cautious about bad outcomes than optimistic about good ones.",
    "trigger": "score < -0.15",
    "multiplier": 1.2,
    "source_domain": 4,
    "source_file": "kridha_scoring_engine_v4.py",
    "source_lines": "1132-1133"
  },
  {
    "rule_id": "D4_R12",
    "name": "5-Step Principle Scoring Pipeline",
    "category": "scoring_rule",
    "description": "Each garment is scored by 10 independent principle functions. Each function follows: (1) relevance gate, (2) base effect from garment attributes, (3) body-type modifier from 80-cell matrix, (4) breakdown/failure-mode check, (5) return score + reasoning chain.",
    "source_domain": 4,
    "source_file": "kridha_master_reference.docx",
    "section": "1"
  },
  {
    "rule_id": "D4_R13",
    "name": "Dual-Goal Scoring for Tent Silhouettes",
    "category": "scoring_rule",
    "description": "Tent silhouettes receive two separate scores: concealment (+0.25 to +0.35) and slimming (-0.20 to -0.40). Default weighting: 30% concealment + 70% slimming (conservative). If user goal = CONCEALMENT: 100% concealment score. If goal = SLIMMING: 100% slimming score.",
    "formulas": {
      "concealment_score": "ER 0.12-0.20: +0.25; ER > 0.20: +0.35",
      "slimming_score": "ER 0.12-0.20: -0.20; ER > 0.20: -0.40",
      "balance_default": "concealment * 0.3 + slimming * 0.7"
    },
    "source_domain": 4,
    "source_file": "kridha_scoring_engine_v4.py",
    "source_lines": "566-585"
  }
]
